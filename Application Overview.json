{"version":13,"variables":[{"key":"AppName","type":"query","input":"fetch dt.entity.application \n|fields entity.name","multiple":true},{"key":"TimeShift","type":"csv","input":"1,7,14,21","multiple":false},{"key":"KPI","type":"csv","input":"Duration,VisuallyCompleteTime,SpeedIndex,LoadEventEnd,FirstInputDelay,CumulativeLayoutShift,LargestContentfulPaint,CdnBusyTime,CdnResources,DocumentInteractiveTime,DomCompleteTime,DomContentLoadedTime,FirstPartyBusyTime,FirstPartyResources,FrontendTime,LoadEventStart,NavigationStart,NetworkTime,RequestStart,ResponseEnd,ResponseStart,ServerTime,ThirdPartyBusyTime,ThirdPartyResources","multiple":false},{"key":"Aggregate","type":"csv","input":"Avg,Median","multiple":false},{"key":"offsetUTC","type":"csv","input":"-12,-11,-10,-9.5,-9,-8,-7,-6,-5,-4,-3.5,-3,-2,-1,0,1,2,3,3.5,4,4.5,5,5.5,5.75,6,6.5,7,8,8.75,9,9.5,10,10.5,11,12,12.75,13,14","multiple":false}],"tiles":{"5":{"title":"","type":"markdown","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"8":{"title":"","type":"markdown","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"18":{"type":"code","title":"Sessions Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  // Create the USQL query string using the values above\n    const query = 'SELECT CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+'), CONDITION (count(*),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') from usersession where useraction.application in ('+appsList+')';\n  // Fire off the USQL query and get the results\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0])>(result[\"values\"][0][1])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][0])<(result[\"values\"][0][1])) \n   return \"🔴\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"23":{"type":"code","title":"Apdex Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const query = 'SELECT CONDITION (count(*),WHERE apdexcategory=\"SATISFIED\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CSatisfied\", CONDITION (count(*),WHERE apdexcategory=\"TOLERATING\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CTolerated\", CONDITION (count(*),WHERE apdexcategory=\"FRUSTRATED\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CFrustrated\", CONDITION (count(*),WHERE apdexcategory=\"SATISFIED\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PSatisfied\", CONDITION (count(*),WHERE apdexcategory=\"TOLERATING\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PTolerated\", CONDITION (count(*),WHERE apdexcategory=\"FRUSTRATED\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PFrustrated\" FROM useraction WHERE useraction.application in ('+appsList+')';\n  export default async function () {\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0] + (result[\"values\"][0][1]/2))/(result[\"values\"][0][0] + result[\"values\"][0][1] + result[\"values\"][0][2]) > (result[\"values\"][0][3] + (result[\"values\"][0][4]/2))/(result[\"values\"][0][3] + result[\"values\"][0][4] + result[\"values\"][0][5])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][0] + (result[\"values\"][0][1]/2))/(result[\"values\"][0][0] + result[\"values\"][0][1] + result[\"values\"][0][2]) < (result[\"values\"][0][3] + (result[\"values\"][0][4]/2))/(result[\"values\"][0][3] + result[\"values\"][0][4] + result[\"values\"][0][5]))\n   return \"🔴\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"27":{"type":"code","title":"Efficiency Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const query = 'SELECT CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"CER\", CONDITION (count(*),WHERE usersession.userexperiencescore=\"SATISFIED\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CER2\", CONDITION (count(*),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PER\", CONDITION (count(*),WHERE usersession.userexperiencescore=\"SATISFIED\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PER2\" FROM usersession where useraction.application in ('+appsList+')';\n  export default async function () {\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][1]/result[\"values\"][0][0])>(result[\"values\"][0][3]/result[\"values\"][0][2])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][1]/result[\"values\"][0][0])<(result[\"values\"][0][3]/result[\"values\"][0][2]))\n   return \"🔴\";\n  else\n  return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"29":{"type":"code","title":"Deficiency Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const query = 'SELECT CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"CER\", CONDITION (count(*),WHERE usersession.userexperiencescore!=\"SATISFIED\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CER2\", CONDITION (count(*),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PER\", CONDITION (count(*),WHERE usersession.userexperiencescore!=\"SATISFIED\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PER2\" FROM usersession where useraction.application in ('+appsList+')';\n  export default async function () {\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][1]/result[\"values\"][0][0])>(result[\"values\"][0][3]/result[\"values\"][0][2])) \n   return \"🔴\";\n  else if ((result[\"values\"][0][1]/result[\"values\"][0][0])<(result[\"values\"][0][3]/result[\"values\"][0][2]))\n   return \"🟢\";\n  else\n  return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"32":{"title":"","type":"markdown","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"36":{"title":"","type":"markdown","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"74":{"type":"code","title":"$Aggregate $KPI Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const query = 'SELECT CONDITION ('+$Aggregate+'('+$KPI+'),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"CER\", CONDITION ('+$Aggregate+'('+$KPI+'),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"CER2\" FROM useraction WHERE useraction.application in ('+appsList+')';\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0])>(result[\"values\"][0][1])) \n   return \"🔴\";\n  else if ((result[\"values\"][0][0])<(result[\"values\"][0][1])) \n   return \"🟢\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"75":{"type":"code","title":"Avg Errors Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const query = 'SELECT CONDITION (avg(totalerrorcount),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"CER\", CONDITION (avg(totalerrorcount),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"CER2\" FROM usersession WHERE useraction.application in ('+appsList+')';\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0])>(result[\"values\"][0][1])) \n   return \"🔴\";\n  else if ((result[\"values\"][0][0])<(result[\"values\"][0][1])) \n   return \"🟢\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"87":{"type":"code","title":"Requests Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  // Create the USQL query string using the values above\n    const query = 'SELECT CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+'), CONDITION (count(*),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') from useraction where useraction.application in ('+appsList+')';\n  // Fire off the USQL query and get the results\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0])>(result[\"values\"][0][1])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][0])<(result[\"values\"][0][1])) \n   return \"🔴\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"88":{"type":"markdown","title":"","content":"# \n# 🔎 Application Overview"},"89":{"type":"code","title":"$Aggregate $KPI","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\n\n\nexport default async function () {\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const kpiName = $KPI;\n  const aggName = $Aggregate;\n  const usqlQuery = 'select distinct name as \"User Action\",CONDITION ('+$Aggregate+'('+$KPI+'),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"Duration(s)\", CONDITION ('+$Aggregate+'('+$KPI+'),WHERE starttime>=('+startTime+' - DURATION(\"7d\")) and (endtime<='+endTime+' - DURATION(\"7d\"))) as \"7 Day Shift\", CONDITION ('+$Aggregate+'('+$KPI+'),WHERE starttime>=('+startTime+' - DURATION(\"14d\")) and (endtime<='+endTime+' - DURATION(\"14d\"))) as \"14 Day Shift\", CONDITION ('+$Aggregate+'('+$KPI+'),WHERE starttime>=('+startTime+' - DURATION(\"21d\")) and (endtime<='+endTime+' - DURATION(\"21d\"))) as \"21 Day Shift\" from useraction where application in ('+appsList+') order by Duration(s) DESC limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -240,startTimestamp:last30Days });\n  const sampleCount = response.values.length;\n  var str7 = \"\";\n  var str14 = \"\";\n  var str21 = \"\";\n  \n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n    if (response.values[index][1]>response.values[index][2]) \n      str7 = ((response.values[index][1]-response.values[index][2])/1000).toFixed(2)+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][2]) \n      str7 = ((response.values[index][1]-response.values[index][2])*(-1)/1000).toFixed(2)+\" ↘️🟢\";  \n    else\n      str7 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][3]) \n      str14 = ((response.values[index][1]-response.values[index][3])/1000).toFixed(2)+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][3]) \n      str14 = ((response.values[index][1]-response.values[index][3])*(-1)/1000).toFixed(2)+\" ↘️🟢\";  \n    else\n      str14 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][4]) \n      str21 = ((response.values[index][1]-response.values[index][4])/1000).toFixed(2)+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][4]) \n      str21 = ((response.values[index][1]-response.values[index][4])*(-1)/1000).toFixed(2)+\" ↘️🟢\";  \n    else\n      str21 = \"0 =🟡\";  \n      return {\n        'User Action': response.values[index][0],\n        'Response Time(s)': (response.values[index][1]/1000).toFixed(2),\n        '7 Day Shift': str7,  \n        '14 Day Shift': str14,  \n        '21 Day Shift': str21  \n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         \n          'User Action': { type: 'string' },\n          'Response Time(s)': { type: 'double' },\n          '7 Day Shift': { type: 'string' },\n          '14 Day Shift': { type: 'string' },\n          '21 Day Shift': { type: 'string' }\n        },\n      },\n    ],\n  };\n}","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"User Action","categoryAxisLabel":"User Action","valueAxis":"Response Time(s)","valueAxisLabel":"Response Time(s)"}},"singleValue":{"showLabel":false,"label":"","autoscale":false,"recordField":"User Action"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[{"valueAxis":"Response Time(s)","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"90":{"type":"code","title":"Requests","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\n\n\nexport default async function () {\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const usqlQuery = 'select distinct name as \"User Action\",CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"Requests\", CONDITION (count(*),WHERE starttime>=('+startTime+' - DURATION(\"7d\")) and (endtime<='+endTime+' - DURATION(\"7d\"))) as \"7 Day Shift\", CONDITION (count(*),WHERE starttime>=('+startTime+' - DURATION(\"14d\")) and (endtime<='+endTime+' - DURATION(\"14d\"))) as \"14 Day Shift\", CONDITION (count(*),WHERE starttime>=('+startTime+' - DURATION(\"21d\")) and (endtime<='+endTime+' - DURATION(\"21d\"))) as \"21 Day Shift\" from useraction where application in ('+appsList+') order by Requests DESC limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -240,startTimestamp:last30Days });\n  const sampleCount = response.values.length;\n  var str7 = \"\";\n  var str14 = \"\";\n  var str21 = \"\";\n  \n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n    if (response.values[index][1]>response.values[index][2]) \n      str7 = response.values[index][1]-response.values[index][2]+\" ↗️🟢\";  \n    else if (response.values[index][1]<response.values[index][2]) \n      str7 = (response.values[index][1]-response.values[index][2])*(-1)+\" ↘️🔴\";  \n    else\n      str7 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][3]) \n      str14 = response.values[index][1]-response.values[index][3]+\" ↗️🟢\";  \n    else if (response.values[index][1]<response.values[index][3]) \n      str14 = (response.values[index][1]-response.values[index][3])*(-1)+\" ↘️🔴\";  \n    else\n      str14 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][4]) \n      str21 = response.values[index][1]-response.values[index][4]+\" ↗️🟢\";  \n    else if (response.values[index][1]<response.values[index][4]) \n      str21 = (response.values[index][1]-response.values[index][4])*(-1)+\" ↘️🔴\";  \n    else\n      str21 = \"0 =🟡\";  \n      return {\n        'User Action': response.values[index][0],\n        'Requests': response.values[index][1],\n        '7 Day Shift': str7,  \n        '14 Day Shift': str14,  \n        '21 Day Shift': str21  \n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         \n          'User Action': { type: 'string' },\n          'Requests': { type: 'double' },\n          '7 Day Shift': { type: 'string' },\n          '14 Day Shift': { type: 'string' },\n          '21 Day Shift': { type: 'string' }\n        },\n      },\n    ],\n  };\n}","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"User Action","categoryAxisLabel":"User Action","valueAxis":"Requests","valueAxisLabel":"Requests"}},"singleValue":{"showLabel":false,"label":"","autoscale":false,"recordField":"User Action"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[{"valueAxis":"Requests","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"91":{"type":"code","title":"Request Errors","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\n\n\nexport default async function () {\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const usqlQuery = 'select distinct name as \"User Action\",CONDITION (sum(requestErrorCount),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"Errors\", CONDITION (sum(requestErrorCount),WHERE starttime>=('+startTime+' - DURATION(\"7d\")) and (endtime<='+endTime+' - DURATION(\"7d\"))) as \"7 Day Shift\", CONDITION (sum(requestErrorCount),WHERE starttime>=('+startTime+' - DURATION(\"14d\")) and (endtime<='+endTime+' - DURATION(\"14d\"))) as \"14 Day Shift\", CONDITION (sum(requestErrorCount),WHERE starttime>=('+startTime+' - DURATION(\"21d\")) and (endtime<='+endTime+' - DURATION(\"21d\"))) as \"21 Day Shift\" from useraction where application in ('+appsList+') and requesterrorcount>0 order by Errors DESC limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -240,startTimestamp:last30Days });\n  const sampleCount = response.values.length;\n  var str7 = \"\";\n  var str14 = \"\";\n  var str21 = \"\";\n  \n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n    if (response.values[index][1]>response.values[index][2]) \n      str7 = response.values[index][1]-response.values[index][2]+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][2]) \n      str7 = (response.values[index][1]-response.values[index][2])*(-1)+\" ↘️🟢\";  \n    else\n      str7 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][3]) \n      str14 = response.values[index][1]-response.values[index][3]+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][3]) \n      str14 = (response.values[index][1]-response.values[index][3])*(-1)+\" ↘️🟢\";  \n    else\n      str14 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][4]) \n      str21 = response.values[index][1]-response.values[index][4]+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][4]) \n      str21 = (response.values[index][1]-response.values[index][4])*(-1)+\" ↘️🟢\";  \n    else\n      str21 = \"0 =🟡\";  \n      return {\n        'User Action': response.values[index][0],\n        'Errors': response.values[index][1],\n        '7 Day Shift': str7,  \n        '14 Day Shift': str14,  \n        '21 Day Shift': str21  \n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         \n          'User Action': { type: 'string' },\n          'Errors': { type: 'double' },\n          '7 Day Shift': { type: 'string' },\n          '14 Day Shift': { type: 'string' },\n          '21 Day Shift': { type: 'string' }\n        },\n      },\n    ],\n  };\n}","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"User Action","categoryAxisLabel":"User Action","valueAxis":"Errors","valueAxisLabel":"Errors"}},"singleValue":{"showLabel":false,"label":"","autoscale":false,"recordField":"User Action"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[{"valueAxis":"Errors","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"92":{"type":"code","title":"JavaScript Errors","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\n\n\nexport default async function () {\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  const usqlQuery = 'select distinct name as \"User Action\",CONDITION (sum(javascriptErrorCount),WHERE starttime>='+startTime+' and endtime<='+endTime+') as \"Errors\", CONDITION (sum(javascriptErrorCount),WHERE starttime>=('+startTime+' - DURATION(\"7d\")) and (endtime<='+endTime+' - DURATION(\"7d\"))) as \"7 Day Shift\", CONDITION (sum(javascriptErrorCount),WHERE starttime>=('+startTime+' - DURATION(\"14d\")) and (endtime<='+endTime+' - DURATION(\"14d\"))) as \"14 Day Shift\", CONDITION (sum(javascriptErrorCount),WHERE starttime>=('+startTime+' - DURATION(\"21d\")) and (endtime<='+endTime+' - DURATION(\"21d\"))) as \"21 Day Shift\" from useraction where application in ('+appsList+') and javascripterrorcount>0 order by Errors DESC limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -240,startTimestamp:last30Days });\n  const sampleCount = response.values.length;\n  var str7 = \"\";\n  var str14 = \"\";\n  var str21 = \"\";\n  \n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n    if (response.values[index][1]>response.values[index][2]) \n      str7 = response.values[index][1]-response.values[index][2]+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][2]) \n      str7 = (response.values[index][1]-response.values[index][2])*(-1)+\" ↘️🟢\";  \n    else\n      str7 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][3]) \n      str14 = response.values[index][1]-response.values[index][3]+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][3]) \n      str14 = (response.values[index][1]-response.values[index][3])*(-1)+\" ↘️🟢\";  \n    else\n      str14 = \"0 =🟡\";  \n    if (response.values[index][1]>response.values[index][4]) \n      str21 = response.values[index][1]-response.values[index][4]+\" ↗️🔴\";  \n    else if (response.values[index][1]<response.values[index][4]) \n      str21 = (response.values[index][1]-response.values[index][4])*(-1)+\" ↘️🟢\";  \n    else\n      str21 = \"0 =🟡\";  \n      return {\n        'User Action': response.values[index][0],\n        'Errors': response.values[index][1],\n        '7 Day Shift': str7,  \n        '14 Day Shift': str14,  \n        '21 Day Shift': str21  \n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         \n          'User Action': { type: 'string' },\n          'Errors': { type: 'double' },\n          '7 Day Shift': { type: 'string' },\n          '14 Day Shift': { type: 'string' },\n          '21 Day Shift': { type: 'string' }\n        },\n      },\n    ],\n  };\n}","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"User Action","categoryAxisLabel":"User Action","valueAxis":"Errors","valueAxisLabel":"Errors"}},"singleValue":{"showLabel":false,"label":"","autoscale":false,"recordField":"User Action"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[{"valueAxis":"Errors","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"93":{"type":"code","title":"Customer Satisfaction","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const lastXDays = 30;                                         // Big bucket\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"5m\"\n  if (timeDiff>.5)\n    var chartInterval = \"10m\"\n  if (timeDiff>1)\n    var chartInterval = \"1h\"\n  const query = 'SELECT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", CONDITION(count(*), where userExperienceScore=\"SATISFIED\")  AS \"Satisfied\", CONDITION(count(*), where userExperienceScore=\"TOLERATED\")  AS \"Tolerated\", CONDITION(count(*), where userExperienceScore=\"FRUSTRATED\")  AS \"Frustrated\" from usersession WHERE useraction.application in ('+appsList+') and  usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' GROUP BY  DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startTime, endTimestamp: endTime, offsetUtc: ($offsetUTC*60)});\n  const sampleCount = response.values.length;\n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n      return {\n        Date: response.values[index][0],\n        'Satisfied': (response.values[index][1]),\n        'Tolerated': response.values[index][2],\n        'Frustrated': response.values[index][3]\n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         Date: { type: 'timestamp' },\n          'Satisfied': { type: 'double' },\n          'Tolerated': { type: 'double' },\n          'Frustrated': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"areaChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"hideLabels":false,"thresholdType":"absolute"},"colorPalette":"apdex","legend":{"hidden":true},"seriesOverrides":[{"seriesId":"Frustrated","override":{"color":"#FF0000"}},{"seriesId":"Tolerated","override":{"color":"#FFFF00"}},{"seriesId":"Satisfied","override":{"color":"#008000"}}],"categoricalBarChartSettings":{},"fieldMapping":{"timestamp":"Date","leftAxisValues":["Satisfied","Tolerated","Frustrated"],"leftAxisDimensions":[],"fields":[],"values":[],"rightAxisValues":[]}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"Date"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"histogram":{"dataMappings":[{"valueAxis":"Satisfied","rangeAxis":""},{"valueAxis":"Tolerated","rangeAxis":""},{"valueAxis":"Frustrated","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}},"layouts":{"5":{"x":0,"y":3,"w":24,"h":1},"8":{"x":0,"y":0,"w":24,"h":1},"18":{"x":9,"y":1,"w":2,"h":2},"23":{"x":21,"y":1,"w":2,"h":2},"27":{"x":17,"y":1,"w":2,"h":2},"29":{"x":19,"y":1,"w":2,"h":2},"32":{"x":0,"y":16,"w":24,"h":1},"36":{"x":0,"y":23,"w":24,"h":1},"74":{"x":13,"y":1,"w":2,"h":2},"75":{"x":15,"y":1,"w":2,"h":2},"87":{"x":11,"y":1,"w":2,"h":2},"88":{"x":0,"y":1,"w":9,"h":2},"89":{"x":12,"y":4,"w":11,"h":6},"90":{"x":0,"y":4,"w":12,"h":6},"91":{"x":12,"y":10,"w":11,"h":6},"92":{"x":0,"y":10,"w":12,"h":6},"93":{"x":0,"y":17,"w":23,"h":6}}}